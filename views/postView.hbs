<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <title>/{{ thread.board }}/ - {{thread.title}}</title>
</head>
<body>
    

    <div class="page">
        <div class="left-bar">
            <div class="menu">
                <ul>
                    <li><a href="/">/b/ - бред</a></li>
                    <li><a href="/">/gd/ - gamedev</a></li>
                    <li><a href="/">/hw/ - компьютерное железо</a></li>
                    <li><a href="/">/mobi/ - мобильные устройства и приложения</a></li>
                    <li><a href="/">/pr/ - программирование</a></li>
                    <li><a href="/">/ra/ - радиотехника</a></li>
                    <li><a href="/">/s/ - программы</a></li>
                    <li><a href="/">/t/ - техника</a></li>
                    <li><a href="/">/web/ - веб-мастера</a></li>
                    <li><a href="/threads/mochatest">/mochatest/ - для тестов</a></li>
                </ul>
            </div>
        </div>
        <div class="right-bar">
            <div class="header">
                <a href="/threads/{{ thread.board }}">
                    <h1 class="main_header">Orange Forum - /{{ thread.board }}/</h1>
                </a>
                <br>
                <button class="button_show_answer_form" onclick="document.getElementById('answer_button').scrollIntoView();">В конец треда</button>
            </div>
            <div class="content">
                <div class="thread">
                    <div  class="post post_type_oppost" id="{{thread._id}}">
                        <p class="post__details">{{thread.date}} tid#{{thread._id}}</p>
                        <div  class="post__message" style="white-space: normal;">
                            <h3>{{thread.title}}</h3>
                            <p style="white-space: pre-wrap;">{{thread.first_post_text}}</p>
                        </div>
                    </div>
                    {{#each posts}}
                    <div class="post post_type_reply" id="{{ this._id }}">

                        <p class="post__details">{{ this.date }} pid#{{ this._id }}</p>
                        <div  class="post__message">{{#if this.reply_to}}<a href="#{{ this.reply_to }}">>>{{ this.reply_to }}</a><br>{{/if}}{{ this.text }}
                        {{#each this.reply_from}}
                        <a href="#{{this}}">>>{{this}}</a>
                        {{/each}}
                        </div>

                    </div>
                    {{/each}}
                </div>
            </div>
            <div class="footer">
                <button id="answer_button" class="button_show_answer_form" onclick="document.getElementById('answer_to_thread').style='display: block;'">Ответить в тред</button>

                <form method="POST" action="/thread/{{thread._id}}" id="answer_to_thread"
                    style="display: none;" class="postform">
                    <table>
                        <tr>
                            <td><textarea cols="60" rows="10" class="textinput" name="text" id="title_input" placeholder="Сообщение"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <td><textarea cols="60" rows="1" class="textinput" name="replyTo" id="reply_to_input" placeholder="Id для ответа"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <td><button type="submit" class="button_submit_answer">Подтвердить</button></td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
    </div>

    <script>
        let bt_show_answer = document.getElementById("answer_button");
        bt_show_answer.onclick = () => {
            if (bt_show_answer.textContent === "Ответить в тред") {
                bt_show_answer.textContent = "Закрыть форму постинга";
                let form = document.getElementById('answer_to_thread')
                form.style='display: block';
                form.scrollIntoView();
            } else {
                bt_show_answer.textContent = "Ответить в тред";
                document.getElementById('answer_to_thread').style='display: none';
            }
        }
    </script>

</body>
</html>